this.RevenueHero=function(){"use strict";function c(e,{defaultLocale:t}){switch(t??e){case"ar":case"ar-AE":case"ar-BH":case"ar-DZ":case"ar-EG":case"ar-IQ":case"ar-JO":case"ar-KW":case"ar-LB":case"ar-LY":case"ar-MA":case"ar-OM":case"ar-QA":case"ar-SA":case"ar-SD":case"ar-SY":case"ar-TN":case"ar-YE":return"ar";case"cs":case"cs-CZ":return"cs";case"da":case"da-DK":return"da";case"de":case"de-AT":case"de-CH":case"de-DE":case"de-LI":case"de-LU":return"de";case"el":case"el-CY":case"el-GR":return"el";case"en-029":case"en-AU":case"en-BZ":case"en-cb":case"en-GB":case"en-IE":case"en-IN":case"en-JM":case"en-MT":case"en-MY":case"en-NZ":case"en-PH":case"en-SG":case"en-TT":case"en-ZA":case"en-ZW":return"en-GB";case"en":case"en-CA":case"en-US":return"en-US";case"es-AR":case"es-BO":case"es-CL":case"es-CO":case"es-CR":case"es-DO":case"es-EC":case"es-GT":case"es-HN":case"es-MX":case"es-NI":case"es-PA":case"es-PE":case"es-PR":case"es-PY":case"es-SV":case"es-US":case"es-UY":case"es-VE":return"es-419";case"es":case"es-ES":case"eu-ES":return"es-ES";case"fi":case"fi-FI":return"fi";case"fr-CA":return"fr-CA";case"fr":case"fr-BE":case"fr-CH":case"fr-FR":case"fr-LU":case"fr-MC":return"fr";case"he":case"he-IL":return"he";case"hu":case"hu-HU":return"hu";case"id":case"id-ID":return"id";case"it":case"it-CH":case"it-IT":return"it";case"ja":case"ja-JP":return"ja";case"ko":case"ko-KR":return"ko";case"nl":case"nl-BE":case"nl-NL":return"nl";case"no":case"nn-NO":case"no-no":return"no";case"pl":case"pl-PL":return"pl";case"pt-BR":return"pt-BR";case"pt-PT":return"pt-PT";case"ro":case"ro-mo":case"ro-RO":return"ro";case"ru":case"ru-mo":case"ru-RU":return"ru";case"sv":case"sv-FI":case"sv-SE":return"sv-SE";case"tr":case"tr-TR":return"tr";case"vi":case"vi-VN":return"vi";case"zh-MO":case"zh-SG":case"zh-CN":return"zh-CN";case"zh-HK":return"zh-HK";case"zh-TW":return"zh-TW"}return"en-US"}const s="RH_SUBMITTING_SESSION",i="RH_HIDE_LOADER",r=c(navigator.language,{});class h{sessionId;url;routerId;formId;constructor(e){this.sessionId=crypto.randomUUID?.(),this.routerId=e,this.url="https://app.revenuehero.io",this.formId=null}setFormId(e){this.formId=e}async createSession(e){window.postMessage({type:s,formId:this.formId},"*");var t=await(await fetch(this.url+"/api/sessions/create?"+new URLSearchParams({include:"account,form_router,meeting_type","fields[form_session]":"session_id,meeting_slots,booking_date,time_zone,qualified,redirect_url,next_available_dates,redistribution_redirect","fields[account]":"company,email_domain,image_url,scheduler_colors,whitelabel,widget_redirect_timeout,widget_hour12_format","fields[form_router]":"redistribution_timeout","fields[meeting_type]":"duration,greeting_text,description,booking_days_limit,day_visibility,widget_hour12_format"}).toString(),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({form_session:{...e,session_id:this.sessionId,form_router_id:this.routerId,source_url:window.location.href},locale:r})})).json();if(t.data.attributes.qualified)return t;{window.postMessage({type:"PROSPECT_DISQUALIFIED"},"*");const e=t.data.attributes.redirect_url;return null!=e&&""!==e.trim()&&(window.location.href=e),window.postMessage({type:i},"*"),null}}}function n(e,t){"marketing--init"!==e&&!0!==window.RH_DEBUG||fetch("https://app.revenuehero.io/logs/ingest",{method:"POST",mode:"cors",keepalive:!0,headers:{"Content-Type":"application/octet-stream","X-No-Compression":"1"},body:JSON.stringify([{url:location.href,runtime:window.navigator.userAgent,time:Date.now(),level:"info",message:e,args:t}])})}const d="RH_EMBED_TARGET",a="RH_DATA_SOURCE",o="RH_SESSION_ID",l="RH_ROUTER_ID",m="RH_FORM_ID",u="RH_SHOW_LOADER",g="RH_FORM_SUBMITTED";class e{storage;constructor(){this.storage=window.localStorage}set(e,t){this.storage.setItem(e,JSON.stringify(t))}get(e){var t=this.storage.getItem(e);return null===t?null:(t=JSON.parse(t),this.storage.removeItem(e),t)}}class p extends e{sessionId;routerId;constructor(e){super(),this.sessionId=e.sessionId,this.routerId=e.routerId}loadData(){var e=this.get(o);return null!==e?this.get(e):null}setData(e,t){var s=this.get("RH_SESSION_ID");if(this.set(a,t),this.set(l,this.routerId),null===s)this.set(o,this.sessionId),this.set(this.sessionId,e);else{const t=this.get(s);null!==t&&(this.set(o,s),this.set(s,{...t,...e}))}}}class t{api;dialog;timeZone;embedTarget;constructor(e,t){this.api=e,this.dialog=t,this.timeZone=function(){var e=window.Intl.DateTimeFormat().resolvedOptions().timeZone;switch(e.toLowerCase()){case"etc/unknown":case"+00:00":return"UTC";default:return e}}()}showDialog(e){null!==e&&this.dialog.open(e)}}class f extends t{store;insideIFrame;formId;constructor(e,t,s,i){super(t,s),this.formId=e,this.store=i,this.insideIFrame=window!==window.parent}async handleSubmit(){var e,t=document.querySelector(this.formId);null!==t&&(e=t.querySelectorAll("input"),t=t.querySelectorAll("select"),e=[...e].reduce((e,t)=>(e[t.name]=t.value,e),{}),e=[...t].reduce((e,t)=>(e[t.name]=t.options[t.selectedIndex].innerText,e),e),this.store.setData(e,"pardot"))}async handleMessage(e){if(void 0!==e?.data&&"pardot"===e.data.source&&e.data.type===g){var t=e.data.formData;if(null!==t){n("marketing__form--submitted");const e=await this.api.createSession({time_zone:this.timeZone,form_params:t});this.showDialog(e)}}}addEventListener(){var e=document.querySelector(this.formId);null!==e&&(n("marketing__form-schedule--attached"),e.addEventListener("submit",this.handleSubmit.bind(this))),this.insideIFrame||window.addEventListener("message",async e=>{await this.handleMessage(e)})}static pageValid(e){return null===e.querySelector(".error")}}class y{greetingText;descriptionText;locale;embedTarget;url;dialogOpen;redirectUrl;dialogElement;dialogContent;iframeElement;events;data;formRouter;account;timeout;meetingBooked;showLoader;formId;loaderColor;requireConfirmation=!1;constructor({greetingText:e,descriptionText:t,locale:s,showLoader:i=!1,loaderColor:r="#fff",embedTarget:a,requireConfirmation:o=!1}){this.greetingText=e,this.locale=s,this.events=[],this.meetingBooked=!1,this.showLoader=i,this.loaderColor=r,this.descriptionText=t,this.requireConfirmation=o,void 0!==a&&this.setEmbedTarget(a),this.addEventListeners()}setEmbedTarget(e){this.embedTarget=document.querySelector(e),null===this.embedTarget?console.warn("RevenueHero - embed target not found"):(this.embedTarget.style.position="relative",this.dialogElement?.remove())}setFormId(e){this.formId=e}redirect(){null!==this.redirectUrl&&void 0!==this.redirectUrl&&""!==this.redirectUrl.trim()&&(window.location.href=this.redirectUrl)}open(e){!function(){var e=navigator.userAgent;let t,s,i,r=parseFloat(navigator.appVersion).toString(),a=parseInt(navigator.appVersion,10),o=navigator.appName;return-1!==(t=e.indexOf("OPR"))?(o="Opera",r=e.substring(t+4),-1!==(t=e.indexOf("Version"))&&(r=e.substring(t+8))):-1!==(t=e.indexOf("Edg"))?(o="Microsoft Edge",r=e.substring(t+4)):-1!==(t=e.indexOf("MSIE"))?(o="Microsoft Internet Explorer",r=e.substring(t+5)):-1!==(t=e.indexOf("Chrome"))?(o="Chrome",r=e.substring(t+7)):-1!==(t=e.indexOf("Safari"))?(o="Safari",r=e.substring(t+7),-1!==(t=e.indexOf("Version"))&&(r=e.substring(t+8))):-1!==(t=e.indexOf("Firefox"))?(o="Firefox",r=e.substring(t+8)):(s=e.lastIndexOf(" ")+1)<(t=e.lastIndexOf("/"))&&(o=e.substring(s,t),r=e.substring(t+1),o.toLowerCase()===o.toUpperCase())&&(o=navigator.appName),-1!==(i=(r=-1!==(i=r.indexOf(";"))?r.substring(0,i):r).indexOf(" "))&&(r=r.substring(0,i)),a=parseInt(""+r,10),isNaN(a)&&(r=parseFloat(navigator.appVersion).toString(),a=parseInt(navigator.appVersion,10)),"Safari"!==o||15<=a}()?this.redirect():(this.data=e,this.data.included=this.data.included.reduce((e,t)=>("meeting_type"===t.type&&(t.attributes.greeting_text=this.greetingText??t.attributes.greeting_text,t.attributes.description=this.descriptionText??t.attributes.description),[...e,t]),[]),this.formRouter=e.included.find(e=>"form_router"===e.type),this.account=e.included.find(e=>"account"===e.type),this.url=this.generateUrlFor(e),this.redirectUrl=this.data.data.attributes.redistribution_redirect,void 0!==this.embedTarget&&null!==this.embedTarget?this.embedTarget.appendChild(this.createDialogContent()):void 0===this.dialogElement?(this.dialogElement=this.createDialog(),this.dialogElement.appendChild(this.createDialogContent()),document.body.appendChild(this.dialogElement)):this.dialogElement.replaceChildren(this.createDialogContent()),this.addIframeEventListeners(),this.dialogOpen=!0,n("marketing__scheduler--opened"))}close(){try{this.dialogElement?.remove(),this.removeLoader(),this.dialogOpen=!1}catch(e){console.error(e)}finally{this.cleanup()}}addIframeEventListeners(){window.addEventListener("message",(e=>{["PAGE_LOADED"].includes(e.data.type)&&null!==this.iframeElement.contentWindow?(n("marketing__scheduler--loaded"),this.iframeElement.contentWindow.postMessage({isEmbed:void 0!==this.embedTarget,isPopup:!0},"*"),this.isLoading()&&this.removeLoader(),null===this.formRouter.attributes.redistribution_timeout||null===this.data.data.attributes.redistribution_redirect||void 0!==this.timeout&&null!==this.timeout||(this.timeout=this.setupRedirect(6e4*this.formRouter.attributes.redistribution_timeout))):["RESIZE_IFRAME"].includes(e.data.type)&&null!==this.dialogContent&&void 0===this.embedTarget?this.dialogContent.style.height=e.data.height+"px":["CLICKED_POWERED_BY"].includes(e.data.type)&&window.open(e.data.url,"_blank")}).bind(this))}addEventListeners(){this.addEvent({eventName:"keydown",callback:this.handleKeyDown.bind(this)}),this.addEvent({eventName:"message",callback:this.handleMessage.bind(this)},window)}addEvent(e,t=document){t.addEventListener(e.eventName,e.callback),this.events.push(e)}handleKeyDown(e){"Escape"===e.key&&this.dialogOpen&&close()}setupRedirect(e=15e3){return setTimeout(()=>{this.close(),this.redirect()},e)}handleMessage(e){var t;["START_REDIRECT_TIMER"].includes(e.data.type)?(null!==this.timeout&&clearTimeout(this.timeout),this.meetingBooked=!0,this.redirectUrl=this.data.data.attributes.redirect_url,this.timeout=this.setupRedirect(e.data.timeout)):"CLOSE_DIALOG"===e.data.type?(null!==this.timeout&&clearTimeout(this.timeout),this.meetingBooked&&(this.redirectUrl=this.data.data.attributes.redirect_url),this.setupRedirect(0)):["RESCHEDULE_CLICKED","ADDING_GUEST"].includes(e.data.type)?(null!==this.timeout&&clearTimeout(this.timeout),this.timeout=null):["ADDED_GUEST"].includes(e.data.type)?(t=e.data.secondsRemaining,this.timeout=this.setupRedirect(1e3*t)):[s].includes(e.data.type)?this.formId===e.data.formId&&this.showLoader&&(this.close(),void 0!==this.embedTarget&&null!==this.embedTarget?this.embedTarget.appendChild(this.createLoader()):(this.dialogElement=this.createDialog(),this.dialogElement.appendChild(this.createLoader()),document.body.appendChild(this.dialogElement))):[i].includes(e.data.type)?this.showLoader&&this.close():["MEETING_ALREADY_BOOKED"].includes(e.data.type)&&this.setupRedirect(0)}cleanup(){this.events.forEach(e=>{document.removeEventListener(e.eventName,e.callback)})}generateUrlFor(e){var t=new URL("https://popup.schedulehero.io");return`${t.protocol}//${t.host}/${this.locale}/book/meetings/${this.requireConfirmation?"new-with-confirm":"new"}?session_id=`+e.data.attributes.session_id}createDialog(){var e=document.createElement("div");return e.setAttribute("id","rh-dialog"),e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.position="fixed",e.style.left="0px",e.style.zIndex="9999999",e.style.top="0px",e.style.overflow="hidden",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.backdropFilter="blur(2px)",e.style.width=window.innerWidth+"px",e.style.width="100%",e.style.height="100%",e}createIframe(){return this.iframeElement=document.createElement("iframe"),this.iframeElement.style.border="0",this.iframeElement.style.height="100%",this.iframeElement.style.width="1px",this.iframeElement.style.minWidth="100%",this.iframeElement.style.flexGrow="1",this.iframeElement.src=this.url+"#"+btoa(encodeURIComponent(JSON.stringify(this.data))),this.iframeElement.id="rh-scheduler-iframe",this.iframeElement}createDialogContent(){var e=void 0===this.account.attributes.scheduler_colors?"8px":this.account.attributes.scheduler_colors.containerBorderRadius??"6px";return this.dialogContent=document.createElement("div"),void 0!==this.embedTarget?(this.dialogContent.style.position="absolute",this.dialogContent.style.top="0px",this.dialogContent.style.bottom="0px",this.dialogContent.style.left="0px",this.dialogContent.style.right="0px",this.dialogContent.style.width="100%",this.dialogContent.style.maxWidth="100%",this.dialogContent.style.height="100%",this.dialogContent.style.maxHeight="100%",this.dialogContent.style.margin="0",this.dialogContent.style.border="0",this.dialogContent.style.borderRadius=e,this.dialogContent.style.overflow="unset",this.dialogContent.style.display="flex",this.dialogContent.style.flexDirection="column",this.dialogContent.style.flexGrow="1"):(this.dialogContent.style.position="relative",this.dialogContent.style.width=window.innerWidth-40+"px",this.dialogContent.style.maxWidth="600px",this.dialogContent.style.height="700px",this.dialogContent.style.maxHeight=window.innerHeight-40+"px",this.dialogContent.style.margin="20px auto",this.dialogContent.style.border="1px solid #888",this.dialogContent.style.borderRadius=e,this.dialogContent.style.overflow="hidden"),this.dialogContent.style.backgroundColor="#fefefe",this.dialogContent.appendChild(this.createIframe()),this.dialogContent}appendLoaderStyles(){var e=document.createElement("style");e.innerHTML=`
      @keyframes l20-1{
        0%    {clip-path: polygon(50% 50%,0       0,  50%   0%,  50%    0%, 50%    0%, 50%    0%, 50%    0% )}
        12.5% {clip-path: polygon(50% 50%,0       0,  50%   0%,  100%   0%, 100%   0%, 100%   0%, 100%   0% )}
        25%   {clip-path: polygon(50% 50%,0       0,  50%   0%,  100%   0%, 100% 100%, 100% 100%, 100% 100% )}
        50%   {clip-path: polygon(50% 50%,0       0,  50%   0%,  100%   0%, 100% 100%, 50%  100%, 0%   100% )}
        62.5% {clip-path: polygon(50% 50%,100%    0, 100%   0%,  100%   0%, 100% 100%, 50%  100%, 0%   100% )}
        75%   {clip-path: polygon(50% 50%,100% 100%, 100% 100%,  100% 100%, 100% 100%, 50%  100%, 0%   100% )}
        100%  {clip-path: polygon(50% 50%,50%  100%,  50% 100%,   50% 100%,  50% 100%, 50%  100%, 0%   100% )}
      }

      @keyframes l20-2{
        0%    {transform:scaleY(1)  rotate(0deg)}
        49.99%{transform:scaleY(1)  rotate(135deg)}
        50%   {transform:scaleY(-1) rotate(0deg)}
        100%  {transform:scaleY(-1) rotate(-135deg)}
      }

      .loader {
        width: 32px;
        aspect-ratio: 1;
        border-radius: 50%;
        border: 4px solid ${this.loaderColor};
        animation:
          l20-1 0.8s infinite linear alternate,
          l20-2 1.6s infinite linear;
        position: absolute;
        top: 50%;
        left: 50%;
        bottom: 50%;
        right: 50%;
      }
  `,document.head.appendChild(e)}isLoading(){return this.showLoader&&null!==document.querySelector(".loader")}createLoader(){var e=document.createElement("div");return e.classList.add("loader"),e}removeLoader(){var e=document.querySelectorAll(".loader");null!==e&&e.forEach(e=>{e.remove()})}}class b extends t{form;constructor(e,t){super(e,t),this.form=document.querySelector(".wpcf7")}async handleSubmit(e){n("marketing__form-schedule--submitted");e=[...e.detail.formData].reduce((e,t)=>(e[t[0]]=t[1],e),{}),e=await this.api.createSession({time_zone:this.timeZone,form_params:e});return this.showDialog(e),!1}addEventListener(){null!==this.form&&n("marketing__form-schedule--attached"),this.form.addEventListener("wpcf7submit",this.handleSubmit.bind(this),!1)}}class w extends t{formId;submitted;constructor(e,t,s){super(t,s),this.formId=e,this.submitted=!1}async handleSubmit(e){var t,s;e.preventDefault(),this.submitted||(n("marketing__form-schedule--submitted"),this.submitted=!0,t=Object.fromEntries(new FormData(e.target).entries()),s=await this.api.createSession({time_zone:this.timeZone,form_params:t}),this.showDialog(s),await this.sendOriginalAction(e.target,t))}async sendOriginalAction(e,t){void 0!==e.action&&await fetch(e.action,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}addEventListener(){var e=document.querySelector(this.formId);null!==e&&(n("marketing__form-schedule--attached"),e.addEventListener("submit",this.handleSubmit.bind(this)))}}const E='.hbspt-form, .hs-form, [data-hs-forms-root="true"]',v=/hsForm|hbspt\-form|[a-z0-9]{8}\-(?:[a-z0-9]{4}\-){3}[a-z0-9]{12}$/i;class _ extends t{formData;formElement;formId;constructor(e,t,s){super(t,s),this.formId=e.startsWith("#")?e.slice(1):e,this.formElement=null,this.formData=null}addEventListener(){window.addEventListener("message",this.handleSubmit.bind(this))}async handleSubmit(s){if(void 0!==s.data&&this.formId.includes(s.data.id)&&"hsFormCallback"===s.data.type&&("onFormSubmit"===s.data.eventName&&(null!=(e=[...document.querySelectorAll(".hbspt-form > iframe")].find(e=>null!==(e.contentDocument?.querySelector(`[id*=${this.formId}]`)??e.contentDocument?.querySelector(`[data-form-id*=${this.formId}]`))))?this.formElement=e.contentDocument?.querySelector("form"):(this.formElement=document.querySelector(`[id*=${this.formId}]`)??document.querySelector(`[data-form-id*=${this.formId}]`)??document.querySelector(E),null!==this.formElement&&(this.formElement="FORM"!==this.formElement.nodeName?this.formElement.querySelector("form"):this.formElement)),this.formData=Array.isArray(s.data.data)?s.data.data.reduce((e,t)=>(e[t.name]=t.value,e),{}):{...s.data.data}),"onFormSubmitted"===s.data.eventName)){const s=null!==this.formElement&&void 0!==this.formElement?Object.fromEntries(Object.entries(Object.fromEntries(new FormData(this.formElement))).filter(e=>""!==e[1]&&null!==e[1]&&void 0!==e[1])):{},i=this.formData??{};n("marketing__form-schedule--submitted");var e=await this.api.createSession({form_params:[...new Set([...Object.keys(s),...Object.keys(i)])].reduce((e,t)=>(e[t]=(null!==s[t]&&void 0!==s[t]&&""!==s[t]&&typeof i[t]==typeof s[t]?s:i)[t],e),{}),time_zone:this.timeZone});this.showDialog(e)}}}const I="inline-form";class S extends t{data;constructor(e,t,s){super(e,t),this.data=s}async submit(){return n("marketing__form-schedule--submitted"),window.postMessage({type:s,formId:I},"*"),this.api.createSession({time_zone:this.timeZone,form_params:this.data})}}class C extends t{formId;JotForm=null;constructor(e,t,s){super(t,s),this.formId=e}isValidJotForm(e){return!0===this.JotForm?.validateAll(e)}async handleSubmit(e){var e=e.target??e.submitter?.form;this.isValidJotForm(e)&&(n("marketing__form-schedule--submitted"),e=Object.fromEntries(new FormData(e)),e=await this.api.createSession({time_zone:this.timeZone,form_params:e}),this.showDialog(e))}addEventListener(){new Promise(e=>setTimeout(e,3e3)).then(()=>{var e,t=document.querySelector(this.formId);null!==t&&null!==(e=t.contentDocument)&&(e=e.querySelector("form"),this.JotForm=t.contentWindow?.JotForm??null,null!==e)&&(n("marketing__form-schedule--attached"),e.addEventListener("submit",this.handleSubmit.bind(this)))}).catch(e=>{console.error(e)})}}class T extends t{form;constructor(e,t,s){super(t,s);t=e.split("_")[1];this.form=window.MktoForms2.getForm(t)}async handleSubmit(e){n("marketing__form-schedule--submitted");e=await this.api.createSession({time_zone:this.timeZone,form_params:e});return this.showDialog(e),!1}addEventListener(){void 0!==this.form&&null!==this.form&&n("marketing__form-schedule--attached"),this.form.onSuccess(e=>(this.handleSubmit(e).then(()=>{console.log("success")}).catch(e=>{console.error(e)}),!1))}}n("marketing--init");const D=window.parent!==window;class L{api;dialog;embedTarget;static formsConnected=[];formType;locale;showLoader;store;constructor({debug:e,descriptionText:t,embedTarget:s,formType:i,greetingText:r,loaderColor:a,locale:o,requireConfirmation:n=!1,routerId:d,showLoader:l=!0}){window.RH_DEBUG=e,this.api=new h(d),this.store=new p(this.api),this.locale=c(navigator.language,{defaultLocale:o}),this.dialog=new y({descriptionText:t,embedTarget:s,greetingText:r,loaderColor:a,locale:this.locale,requireConfirmation:n,showLoader:l}),this.formType=i,this.showLoader=l,this.store.set(u,this.showLoader),this.addWebHints(),this.dialog.appendLoaderStyles()}addWebHints(){var e=document.createElement("link"),t=(e.rel="preconnect",new URL("https://popup.schedulehero.io"));e.href=t.origin,document.head.appendChild(e)}asyncSchedule(t,s){if(!L.formsConnected.includes(t)){n("marketing__form-schedule--init",{routerId:this.api.routerId}),L.formsConnected.push(t),this.dialog.setFormId(t),this.api.setFormId(t),this.store.set(m,t),void 0!==s&&(this.store.set(d,s),this.dialog.setEmbedTarget(s));var s=void 0!==window.hbspt&&void 0!==window.hbspt.forms||v.test(t)||null!==document.querySelector(E),i=void 0!==window.MktoForms2,r=void 0!==window.wpcf7,a="pardot"===this.formType,o="jotForm"===this.formType;let e;e=s?new _(t,this.api,this.dialog):i?new T(t,this.api,this.dialog):r?new b(this.api,this.dialog):a?new f(t,this.api,this.dialog,this.store):new(o?C:w)(t,this.api,this.dialog),this.scheduleFormElementCheck(t),s?e.addEventListener():(async i=>new Promise(t=>{var e=document.querySelector(i);if(null!==e)t(e);else{const s=new MutationObserver(()=>{var e=document.querySelector(i);null!==e&&(t(e),s.disconnect())});s.observe(document.body,{childList:!0,subtree:!0})}}))(t).then(()=>{e.addEventListener()}).catch(e=>{console.error(e)})}}schedule(e,t){"complete"===document.readyState?this.asyncSchedule(e,t):window.addEventListener("load",()=>{this.asyncSchedule(e,t)})}scheduleFormElementCheck(t){setTimeout(()=>{null===(document.querySelector(t)??[...document.querySelectorAll("iframe")].map(e=>e.contentDocument?.querySelector(t)??null).find(e=>e instanceof HTMLElement)??null)&&n("marketing__form-schedule--no-form-found",{formId:t,routerId:this.api.routerId})},1e4)}async submit(e){try{var t=new S(this.api,this.dialog,e);return this.api.setFormId(I),this.dialog.setFormId(I),n("marketing__form--submitted",{routerId:this.api.routerId}),await t.submit()}catch(e){return n("marketing__form-submit--errored",{error:JSON.stringify(e)}),null}}}{const x=new e,O=x.get(a),R=x.get(l),k=x.get(d),F=x.get(m)||"",A=x.get(u)||!1,U=(e,t)=>{null!==t&&(null!==k&&e.dialog.setEmbedTarget(k),e.dialog.open(t))};if(null!==R){const x=new L({routerId:R,showLoader:A}),k=x.store.loadData(),F=(t,e)=>{t.submit(e).then(e=>{U(t,e)}).catch(e=>{console.error(e)})};if(D&&"pardot"===O&&null!==k&&f.pageValid(document))window.parent.postMessage({formData:k,routerId:R,source:"pardot",type:g},"*");else if(!D&&null!==k&&null!==O){const R=(e=>{if("pardot"===e)return f})(O);new Promise(e=>setTimeout(e,100)).then(()=>{R.pageValid(document)&&F(x,k)}).catch(e=>{console.error(e)})}}window.addEventListener("message",async e=>{if(void 0!==e?.data&&e.data.type===g){const s=x.get(u)||!1,i=new L({routerId:e.data.routerId,showLoader:s}),r=e=>{U(i,e)};i.api.setFormId(F),i.dialog.setFormId(F);var t=new f("",i.api,i.dialog,i.store);t.showDialog=r,await t.handleMessage(e)}})}return L}();
!function(){"use strict";const e=9/16;let t;!function(e){e.SET_UTK="SET_UTK";e.SET_PAGE_META="SET_PAGE_META";e.SET_CURRENT_TIME="SET_CURRENT_TIME";e.SET_PLAYBACK_RATE="SET_PLAYBACK_RATE";e.UPDATE_DISPLAY_OPTIONS="UPDATE_DISPLAY_OPTIONS";e.SET_PLAYER_STATUS="SET_PLAYER_STATUS";e.CONFIRM_VISIBLE="CONFIRM_VISIBLE";e.CTA_SKIPPED="CTA_SKIPPED";e.CTA_CLICKED="CTA_CLICKED";e.FORM_SKIPPED="FORM_SKIPPED";e.FORM_SUBMITTED="FORM_SUBMITTED";e.VIDEO_LOADED="VIDEO_LOADED";e.PLAYER_LOADED="PLAYER_LOADED";e.PLAYER_READY="PLAYER_READY";e.PLAYER_PLAY="PLAYER_PLAY";e.PLAYER_PAUSE="PLAYER_PAUSE";e.PLAYER_ENDED="PLAYER_ENDED";e.PLAYER_PROGRESS="PLAYER_PROGRESS";e.PLAYER_TIME_UPDATE="PLAYER_TIME_UPDATE";e.PLAYER_SHOW_OVERLAY="PLAYER_SHOW_OVERLAY";e.PLAYER_ORPHANED="PLAYER_ORPHANED";e.PLAYER_ERROR="PLAYER_ERROR";e.PLAYER_ANALYTICS_EVENTS="PLAYER_ANALYTICS_EVENTS";e.PLAYER_SECONDS_VIEWED="PLAYER_SECONDS_VIEWED";e.TRACKED_PLAY="TRACKED_PLAY";e.TRIGGER_AUTOPLAY="TRIGGER_AUTOPLAY"}(t||(t={}));const o=["region","posterUrl","playButtonColor","play_button_color","playButtonShape","play_button_shape","preview","richTextPreview","playerType","autoplay","autoPlay","subtitleLanguage","enablePictureInPicture","loop","muted","hiddenControls","hidden_controls","hostApp","renderContext","parentUrl","maxHeight","objectFit","playbackRate"],n=1e3,i="/share/hubspotvideo/",r={INITIAL:"INITIAL",LOADING:"LOADING",READY:"READY",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",CONVERSION_ASSET_OVERLAY:"CONVERSION_ASSET_OVERLAY",ERROR:"ERROR"};let s,a;!function(e){e.FORM="FORM";e.CTA="CTA"}(s||(s={}));!function(e){e.PRE="PRE";e.POST="POST";e.CUSTOM="CUSTOM"}(a||(a={}));const l={DEFAULT:"hsvideo-mux",VIDEOJS_RAW_URL:"videojs-raw-url",HTML5:"html5",IN_APP_PREVIEW:"inAppPreview",EDITOR_PREVIEW:"editorPreview",RICH_TEXT_PREVIEW:"richTextPreview",ACADEMY_IN_APP:"academy"},d="VIDEO_PLAYER_ENV",c="-qa.js",u=[".hubspotqa.com",".hubspotvideoqa.com",".hsappstatic.net"],h=/http(s?):\/\/(app|local)(-\w+)?.hubspot(qa)?.com/;let p=!1;function f(e,t=!0){if(!t&&p)return null;try{return localStorage.getItem(e)}catch(e){p=!0;return null}}const m=()=>window[d];function g(){return m()?"local"===m():"local"===f(d)||!!window.location.search.includes("_hsVideoEnv=local")}function E(){if(we()||"qa"===f(d))return!0;if(m())return"qa"===m();const e=V();return u.some((e=>window.location.hostname.endsWith(e)))||e&&e.endsWith(c)}function y(e={}){const t=e.region||Pe(),o=t?`-${t}`:"";if("prod"===e.env)return`https://${g()?"local":`play${o}`}.hubspotvideo.com`;if(v()&&e.playerType!==l.ACADEMY_IN_APP){if(E()&&!g()&&!Pe())return"https://app.hubspotqa.com";if(!e.region&&!e.env)return window.location.origin}if(g())return E()?"https://local.hubspotvideoqa.com":"https://local.hubspotvideo.com";return`https://play${o}.${E()||"qa"===e.env?"hubspotvideoqa.com":"hubspotvideo.com"}`}function b(){return"jasmineRequire"in window}function v(e){return!(b()&&!e)&&Boolean((e||window.location).origin.match(h))}function w(){return Boolean(f("selenium.disable.alarms"))}const P="hs_video_debug";function A(){return!!(g()||window.hsVideoDebug||window.location.search.includes("debug=true"))||"true"===f(P)}function _(...e){if(A()){const t=e.shift();console.log.apply(console,[`[hs-video] ${t}`,...e])}}const I="hs-script-loader",R="/hs/scriptloader/",T=/video-embed\/ex\/loader(-qa)?.js/,S=`${"div.hs-video-widget[data-hsv-embed-id]"}:not([data-hsv-status])`,L="iframe[data-hsv-src]",O="iframe[data-hsv-id][src]";function C(e){return[].slice.call(document.querySelectorAll(e))}function $(e,t){return[].slice.call(e.querySelectorAll(t))}function M(){return C("script[src]").find((e=>T.test(e.src)||e.src.endsWith("/video-embed/static/bundles/loader.js")))}function D(){const e=document.getElementById(I);if(e&&e.src&&e.src.includes(R)){const t=document.createElement("a");t.href=e.src;const o=t.pathname.replace(R,"").replace(".js",""),n=Number(o);if(n>0)return n}return null}function V(){const e=M();return e?e.src:null}function k(e,t=!1){return t?document.querySelector(`[data-hsv-embed-id="${e}"]:not([data-hsv-status])`):document.querySelector(`[data-hsv-embed-id="${e}"]`)}function x(){return"interactive"===document.readyState||"complete"===document.readyState}const N=1e4;function Y(e,t){const o=document.createElement("script");return new Promise(((n,i)=>{let r=!1;o.onload=()=>{r=!0;n()};o.onerror=()=>i(new Error(`loadScript failed for: ${e}`));o.src=e;t&&Object.keys(t).forEach((e=>o.setAttribute(e,t[e])));document.getElementsByTagName("head")[0].appendChild(o);setTimeout((()=>{r||i(new Error(`loadScript timed out for: ${e}`))}),N)}))}function q(e,t={}){e instanceof HTMLElement&&Object.assign(e.style,t)}function F(e,t){t.startsWith(".")||(t=`.${t}`);for(;e&&e.parentElement;){if(e.parentElement.matches&&e.parentElement.matches(t))return e.parentElement;e=e.parentElement}return null}function U(e,t){return Boolean(F(e,t))}function j(e){const t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<window.innerWidth&&t.top<window.innerHeight}function W(e){const{backgroundColor:t}=getComputedStyle(e);return"transparent"===t||"rgba(0, 0, 0, 0)"===t}function H(e){const t=document.createElement("iframe");t.src=`${y()}/video-preloader/${ve()}`;q(t,{display:"none",width:0,height:0,border:"0 none"});_("Created preloader iframe",t);t.addEventListener("load",(()=>{_("Preloader iframe loaded, removing from page.");t.remove();e()}));document.body.appendChild(t)}const B="na1",K={APP:"app",APP_API:"app-api"};function G(e,t){const o=t&&t.hubletOverride?t.hubletOverride:e;return o===B?"":`-${o}`}function Q(e,t,o){if(o&&o.hubletPostfixLocation&&"domain"===o.hubletPostfixLocation)return t;t===K.APP_API&&(t=K.APP);return`${t}${G(e,o)}`}function J(e,t,o){return`${X(o)}${z(t,o)}${Z(e,o)}`}function z(e,t){return"qa"===(t&&t.envOverride?t.envOverride:e)?"qa":""}function X(e){return e&&e.domainOverride?e.domainOverride:"hubspot"}function Z(e,t){return t&&t.hubletPostfixLocation&&"domain"===t.hubletPostfixLocation?G(e,t):""}function ee(e){return e&&e.tldOverride?e.tldOverride:"com"}function te(e){return e===K.APP_API?"/api":""}function oe(e,t,o,n){return`https://${Q(t,e,n)}.${J(t,o,n)}.${ee(n)}${te(e)}`}const ne="outpost",ie=({hublet:e=B,isQa:t=!1}={})=>`${oe("forms",e.length>0?e:B,t?"qa":"prod",{domainOverride:"hubspot"})}/${ne}`,re=({hublet:e=B,isQa:t=!1}={})=>`${oe("exceptions",e.length>0?e:B,t?"qa":"prod",{domainOverride:"hs-embed-reporting"})}/${ne}`;function se(e,...t){let o,n=0;e=e||{};for(;n<t.length;)if(t[n]){for(o in t[n])t[n].hasOwnProperty(o)&&(e[o]=t[n][o]);n++}else n++;return e}function ae(e,t){if(!t)return!1;for(let o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1}function le(e){let t="";for(const o in e)e.hasOwnProperty(o)&&(t+=`${o}=${e[o]};`);return t}const de=({isEmbedApp:e=!1,env:t="PROD",hublet:o=""})=>{const n="PROD"!==t;return e?re({isQa:n,hublet:o}):ie({isQa:n,hublet:o})};class ce{constructor(e,t){t=t||{};e||console.warn("The projectName parameter is required");this.projectName=e;this.env=(t.env||"PROD").toUpperCase();this.hublet=t.hublet||"";this.isEmbedApp=t.isEmbedApp||!1;this.level=(t.level||"ERROR").toUpperCase();this.disabled=t.disabled||!1;this.baseUrl=t.baseUrl||de({isEmbedApp:this.isEmbedApp,env:this.env,hublet:this.hublet});this.tags=t.tags||{};this.cookies=t.cookies||{};this.user=t.user||{}}bindToWindow(e=[],t=[]){e.length<1?console.warn("You need to specify allowlisted domains when binding to window errors or you will catch all page errors"):window.onerror=(o,n,i,r,s)=>{n&&ae(e,n)&&!ae(t,s.message)&&"script error"!==o.toLowerCase()&&this.sendReport("error",o,n,s)}}report(e,t,o={}){if(e){o.silent&&console.error(e);this.sendReport("error",e.message,e.fileName,e,t)}}reportMessage(e,t,o={}){if(e){o.silent&&console.error(e);this.sendReport("info",e,window.location.href,void 0,t)}}debug(e,t){if(e&&"DEBUG"===this.level){console.debug(e);this.sendReport("debug",e.message,e.fileName,e,t)}}addTags(e){se(this.tags,e)}addCookies(e){se(this.cookies,e)}addUserContext(e){se(this.user,e)}sendReport(e,t,o,n,i){if(this.disabled){console.warn("Not reporting error to Outpost because logging is disabled");return}o=o||(window.document.currentScript?window.document.currentScript.src:null)||window.location.href;const r=this.buildReport(e,t,o,n,i),s=new Image,a=encodeURIComponent(JSON.stringify(r));s.src=`${this.baseUrl}/${this.projectName}/error.gif?report=${a}`;s.onload=()=>{console.log(`Completed reporting error to ${this.projectName}`)}}buildReport(e,t,o,n,i={}){const r=n?n.name:"Message";let s;s=n&&n.message?n.message.substring(0,999):t.substring(0,999);return{culprit:r,message:s,level:e,exception:[{type:r,value:n&&n.stack&&n.stack.substring(0,999)||s,url:o}],request:{url:`${window.location.protocol}//${window.location.host+window.location.pathname}`,queryString:window.location.search.replace(/(^\?)/,""),cookies:le(this.cookies)},environment:this.env,tags:se(this.tags),user:this.user,extra:i}}}var ue=ce;const he=5;let pe,fe=0;function me(){pe||(pe=new ue("video-embed",{env:we()?"qa":null,debug:A(),tags:{domain:window.location.origin,portalId:ve()||void 0,hublet:Pe()||void 0}}));return pe}function ge(){return!(b()||w()||fe>=he)}function Ee(e,t={}){_("Reporting message to outpost",e);if(ge()){me().reportMessage(e,t);fe++}}function ye(e,t={}){_("Reporting error to outpost",e);if(ge()){me().report(e,t);fe++}}function be(){return window.hsVars?window.hsVars:null}function ve(){const e=M();return e&&e.dataset.hsPortalId?Number(e.dataset.hsPortalId):be()?be().portal_id:D()}function we(){const e=M();if(e&&e.dataset.hsEnv)return"qa"===e.dataset.hsEnv;const t=be();return!(!t||!t.app_hs_base_url)&&t.app_hs_base_url.includes("hubspotqa.com")}function Pe(){const e=M();if(v()){const e=window.location.hostname.split(".")[0];if(e.includes("-"))return e.split("-")[1]}if(e&&e.dataset.hsRegion)return e.dataset.hsRegion;const t=be();if(t&&t.app_hs_base_url){const e=t.app_hs_base_url.split("//")[1].split(".")[0];return e.includes("-")?e.split("-")[1]:null}return null}function Ae(){const e=M();return e&&e.dataset.hsPageId?Number(e.dataset.hsPageId):be()?be().page_id:null}function _e(){return be()?be().language:null}function Ie(){return Boolean(window.hsInEditor)}function Re(){return window.location.pathname.startsWith(i)}const Te="hs-content-id-";function Se(){let e=null;document.body.classList.forEach((t=>{t.includes(Te)&&(e=parseInt(t.replace(Te,""),10))}));return e||null}function Le(){return window.hsVideoOptions||{}}function Oe(){const e={pageUrl:window.location.href,pageTitle:document.title,pageId:Ae()};Re()&&(e.pageId=0);if("number"==typeof e.pageId)return e;if(!v())if(Se()){e.pageId=Se();Ee("Missing expected hsVars context, parsed pageId from body classname")}else Ee("Missing expected hsVars context");return e}function Ce(e,t=[]){return Object.keys(e).filter((e=>t.includes(e))).reduce(((t,o)=>Object.assign({},t,{[o]:e[o]})),{})}function $e(e){return Object.values?Object.values(e):Object.keys(e).map((t=>e[t]))}function Me(e=window.location.search){const t={};"?"===e[0]&&(e=e.substring(1));e.split("&").forEach((e=>{const[o,n]=e.split("=");if(o&&n)try{t[o]=decodeURIComponent(n)}catch(i){_(`Could not decode query param: ${e}`);t[o]=n}}));return t}function De(e){const t={};Object.keys(e).forEach((o=>{(e[o]||"number"==typeof e[o])&&(t[o]=e[o])}));return Object.keys(t).map((e=>`${e}=${encodeURIComponent(t[e])}`)).join("&")}function Ve(e){return"object"==typeof e&&Object.keys(e).length?`?${De(e)}`:""}const ke=["type","id","position","overlayDelaySeconds","preventSkip"];function xe(e){return ke.map((t=>e[t]?String(e[t]):"")).join("_")}function Ne(e){const t=be(),n=t&&"number"==typeof t.page_id?t.page_id:Se(),i=window.location.origin||`${window.location.protocol}//${window.location.hostname}`,r=Object.assign({},Ce(e,o),{parentOrigin:i,pageId:n,locale:_e()});r.parentOrigin||Ee(`window.location is missing - ${document.documentURI}`);A()&&(r.debug=!0);Ie()&&(r.playerType=l.EDITOR_PREVIEW);const d=Me();Le().hidePosterImage&&(r.hidePosterImage=!0);d._hsVideoForm?e.conversionAsset={type:s.FORM,position:a.PRE,id:d._hsVideoForm}:d._hsVideoCta&&(e.conversionAsset={type:s.CTA,position:a.PRE,id:d._hsVideoCta});"object"==typeof e.conversionAsset&&e.conversionAsset.type&&e.conversionAsset.id&&(r.ca=xe(e.conversionAsset));if(r.playButtonColor){r.playButtonColor=r.playButtonColor.replace("#","");"ffffff"===r.playButtonColor&&delete r.playButtonColor}1===r.playbackRate&&delete r.playbackRate;"100%"===e.height&&("100%"===e.width||e.full_width)&&(r.objectFit="cover");return r}function Ye(e,t,o={},n,i,r){let s="video";if(e&&t){const o=i&&i.playerType===l.ACADEMY_IN_APP;s=v()&&!o?`video/${e}/id/${t}`:`v/${e}/id/${t}`}const a={};if(n){a.hsvid=n;a.t=Date.now();r&&(a.afterPreload=!0)}const d=Ve(a).replace("?","#");return`${y(i)}/${s}${Ve(o)}${d}`}const qe='\n  <div class="hsv-overlay-close" aria-label="Close" role="button" data-action="close"\n       style="position: absolute; display: block; top: 15px; right: 15px; width: 16px; height: 16px; background: transparent; cursor: pointer">\n    <svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top: 0; stroke: white; stroke-width: 2px">\n      <path d="M14.5,1.5l-13,13m0-13,13,13" transform="translate(-1 -1)"></path>\n    </svg>\n    <span style="position: absolute; padding: 20px; border-radius: 100%; top: -12px; left: -12px; background: rgba(255, 255, 255, 0.1)" />\n    <style>\n      .hsv-overlay-close > span { display: none; }\n      .hsv-overlay-close:hover > span { display: block; }\n    </style>\n  </div>\n',Fe=e=>/^\d+$/.test(e);function Ue(e,t){const o=document.createElement("div");o.innerHTML=qe;o.querySelector(".hsv-overlay-close").addEventListener("click",(()=>e()));t.appendChild(o.firstElementChild)}function je(e,t){return Fe(t.id)?`\n    <div class="hsv-cta-wrapper hsv-overlay" style="position: absolute; display: flex; width: 100%; height: 100%;\n                                        align-items: center; justify-content: center;">\n      <div class="hs-cta-embed hs-cta-simple-placeholder hs-cta-embed-${t.id}">\n        <a target="_blank" rel="noopener noreferrer">\n          <img\n            alt="Video CTA"\n            src="${We(t.id,e)}"\n          />\n        </a>\n      </div>\n      ${t.preventSkip?"":qe}\n    </div>\n    `:`\n    <div class="hsv-cta-wrapper hsv-overlay" style="position: absolute; display: flex; width: 100%; height: 100%;\n                                        align-items: center; justify-content: center;">\n        <span class="hs-cta-node hs-cta-${t.id}" id="hs-cta-${t.id}">\n          <a target="_blank" rel="noopener noreferrer">\n            <img\n              class="hs-cta-img"\n              id="hs-cta-img-${t.id}"\n              alt="Video CTA"\n              src="${We(t.id,e)}"\n            />\n          </a>\n        </span>\n        ${t.preventSkip?"":qe}\n      </div>\n    `}function We(e,t){let o=`//no-cache.${E()?"hubspotqa.com":"hubspot.com"}`;Pe()&&(o=E()?`//hubspot-no-cache-${Pe()}-qa.s3.amazonaws.com`:`//hubspot-no-cache-${Pe()}-prod.s3.amazonaws.com`);return`${o}/cta/default/${t}/${Fe(e)?`interactive-${e}`:e}.png`}function He(e,o){const{id:n}=o,i=document.createElement("div");i.innerHTML=je(e.portalId,o);const r=i.firstElementChild;e.getWrapperEl().append(r);const s=()=>{e.postMessageToPlayer(t.CTA_SKIPPED);r.style.display="none"},a=()=>{e.postMessageToPlayer(t.CTA_CLICKED);r.style.display="none"},l=()=>{r.querySelector(".hsv-overlay-close")||Ue(s,r)},d=r.querySelector(".hsv-overlay-close");d&&d.addEventListener("click",s);const c=()=>{if(!window.hbspt||!window.hbspt.cta){Ee("Could not load CTA JS");s();return}window.hbspt.cta._relativeUrls=!0;window.hbspt.cta.canonicalURL=window.location.href;const t={region:Pe()||B,useNewLoader:!0,enforceTargetIsBlank:!0};E()&&(t.env="qa");e.el.querySelector(".hs-cta-node").addEventListener("click",a);window.hbspt.cta.load(e.portalId,n,t);window.hbspt.cta.loadQueue()},u=()=>{if(!window.__PRIVATE__HubspotCtaClient||"function"!=typeof window.__PRIVATE__HubspotCtaClient.loadCta){Ee("Web interactive API not found after load");s();return}const e=r.querySelector(".hs-cta-simple-placeholder");window.hsCtasOnReady=window.hsCtasOnReady||[];window.hsCtasOnReady.push((()=>{window.__PRIVATE__HubspotCtaClient.loadCta({contentId:Number(o.id),options:{openInNewTab:!0,elementToEmbed:e,onNavigate:a}});window.HubSpotCallsToActions&&window.HubSpotCallsToActions.on("onCallToActionFormSubmitted",l)}))};if(Fe(o.id))if(window.__PRIVATE__HubspotCtaClient)u();else{let e=`${window.location.origin}/hs/cta/web-interactives-embed.js`;v()&&(e=E()?"https://js.hubspotqa.com/web-interactives-embed.js":"https://js.hscta.net/web-interactives-embed.js");Y(e,{id:"hubspot-web-interactives-loader",crossorigin:"anonymous","data-loader":"hs-scriptloader","data-hsjs-portal":ve(),"data-hsjs-hublet":Pe()||B}).then(u).catch((e=>{Ee("Failed to load web interactive JS",{errorMessage:String(e)});s()}))}else if(window.hbspt&&window.hbspt.cta)c();else{let e=`${window.location.origin}/hs/cta/cta/current.js`;v()&&(e=E()?"https://js.hubspotqa.com/cta/current.js":"https://js.hscta.net/cta/current.js");Y(e).then(c).catch((e=>{console.error("Failed to display CTA",e);Ee("Failed to display CTA",{errorMessage:String(e)});s()}))}}let Be;function Ke(){if(!Be)try{Be=window.scrollTo;window.scrollTo=(...e)=>{_("Prevented scrollTo with args:",...e)}}catch(e){_("Failed to patch window.scrollTo to prevent forms auto-scroll",e)}}function Ge(){if(Be){try{window.scrollTo=Be}catch(e){_("Failed to un-patch window.scrollTo to restore auto-scroll ability",e)}Be=void 0}}const Qe="hsv-form-wrapper",Je=9,ze="Thanks for your response!";function Xe(e){return`\n      <div class="hsv-overlay hsv-form-modal" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;">\n        <div class="${Qe}" style="height: 100%; overflow-y: auto; padding: 20px 40px; text-align: left">\n          <div class="hsv-form" />\n        </div>\n        ${e.preventSkip?"":qe}\n      </div>\n  `}const Ze=e=>{const t=e.querySelector("form");if(!t){_("Form el not found in onFormReady callback");return}const o=t.querySelector("div.actions");o&&q(o,{margin:0,padding:0})};function et(e,o){let n,i=!1,r=!1,s=!1;const{id:l}=o,d=document.createElement("div");d.innerHTML=Xe(o);const c=d.firstElementChild;e.getWrapperEl().append(c);const u=c.querySelector(".hsv-form"),h=()=>{Ge();e.postMessageToPlayer(i?t.FORM_SUBMITTED:t.FORM_SKIPPED,{isLegacyForm:r});c.style.display="none"},p=()=>{e.postMessageToPlayer(t.FORM_SUBMITTED,{isLegacyForm:r});c.style.display="none"},f=()=>{var e;Ge();s&&p();i=!0;const t=c.querySelector(".submitted-message")||u;c.querySelector(".hsv-overlay-close")||Ue(p,c);const n=`\n      <div style="margin-top: 10px; text-align: center">\n        <a data-test-id="form-watch-video" style="cursor: pointer">\n          ${(null===(e=o.copy)||void 0===e?void 0:e.watchVideo)||"Watch video"}\n        </a>\n      </div>\n    `,r=document.createElement("div");r.innerHTML=n;r.querySelector("a").addEventListener("click",(()=>p()));setTimeout((()=>{t.append(r.firstElementChild)}),250)},m=e.el.querySelector(".hsv-overlay-close");m&&m.addEventListener("click",h);const g=()=>{if(window.HubSpotForms){Ke();e.form=window.HubSpotForms.create({formId:l,portalId:e.portalId,env:E()?"qa":null,region:Pe(),target:`${e.getPlaceholderSelector()} .hsv-form`,css:"",onFormDefinitionFetchSuccess:e=>{n=e.form;if(n){n.formTypeNumber===Je&&(r=!0);n.inlineMessage||(s=!0)}},onFormReady:()=>{const t=c.querySelector("form");t&&W(t)&&q(u,{background:"white",padding:"10px 20px"});Ze(c);if(n.redirectUrl&&o.position!==a.POST){var i;_(`Overriding redirectUrl ${n.redirectUrl} with generic inlineMessage`);e.form.setContext({inlineMessage:(null===(i=o.copy)||void 0===i?void 0:i.defaultThankYouMessage)||ze,redirectUrl:""})}},getExtraMetaDataBeforeSubmit:()=>({hs_video_id:e.options.id,hs_video_title:e.video?e.video.title:null}),onFormSubmitted:()=>setTimeout(f,0)})}else{Ee("Could not load Forms JS");h()}};if(window.HubSpotForms)g();else{Y(`//js.${E()?"hsformsqa.net":"hsforms.net"}/forms/embed/v2.js`).then(g).catch((e=>{console.error("Failed to display form",e);Ee("Failed to display form",{errorMessage:String(e)});h()}))}}const tt=[r.INITIAL,r.LOADING,r.READY],ot="video-embed-js",nt="hubl-iframe",it=()=>window.performance.now?window.performance.now():null,rt=(e,t)=>{const o=e.filter((e=>"number"==typeof e.timings[t])).map((e=>e.timings[t]));return o.length?Math.round(Math.min(...o)):null},st=e=>{let t=ot;e.some((e=>e.options.renderContext&&e.options.renderContext.startsWith("hubl-iframe")))&&(t=nt);return{embedType:t,embedVersion:1,firstVideoLoadedAt:rt(e,"loadedAfterMs"),firstVideoReadyAt:rt(e,"readyAfterMs"),firstVideoPlayedAt:rt(e,"playedAfterMs"),numHsVideos:e.length,numAutoplay:e.filter((e=>e.options.autoplay)).length,numInitiallyVisible:e.filter((e=>e.initiallyVisible)).length,numInteractedWith:e.filter((e=>!tt.includes(e.status))).length,secondsOfVideoPlayed:e.reduce(((e,t)=>e+(t.timings.secondsViewed||0)),0)}},at="hsv",lt="ca",dt=["id","width","height"],ct={fullWidth:"full_width"},ut=[".slick-slide.slick-cloned",".swiper-slide-duplicate"],ht=e=>`${e[0].toLowerCase()}${e.slice(1)}`;function pt(e){let t=e.querySelector("img[data-hsv-id]");t||(t=e.querySelector("iframe[data-hsv-src]"));if(!t)return null;const o=Object.assign({},t.dataset),n={embedId:e.dataset.hsvEmbedId};Object.keys(o).forEach((e=>{let t=o[e];(e=ht(e.replace(at,"")))in ct&&(e=ct[e]);"true"===t?t=!0:"false"===t?t=!1:dt.includes(e)&&(e.includes("%")||Number.isNaN(Number(t))||(t=Number(t)));if(e.startsWith("ca")){e=ht(e.replace(lt,""));n.conversionAsset=n.conversionAsset||{};"overlayDelaySeconds"===e&&(t=Number(t));n.conversionAsset[e]=t}else n[e]=t}));return n}function ft(e){return!ut.some((t=>U(e,t)))}function mt(e=document.body){const t=$(e,S).filter((e=>e.querySelector("img[data-hsv-id]"))),o=t.filter(ft);o.length!==t.length&&_(`Found only ${o.length} valid placeholders out of ${t.length} total.`,t);const n=o.map(pt),i={};o.forEach(((e,t)=>{const o=n[t];o&&o.embedId&&(i[o.embedId]={id:o.embedId,el:e,options:o})}));Object.keys(i).length!==n.length&&_(`Found only ${Object.keys(i).length} unique embedIds for ${n.length} placeholders.`,o);return $e(i)}function gt(e=document.body){return $(e,S).filter((e=>e.querySelector(L))).map((e=>({el:e,options:pt(e)})))}class Et{constructor(e,o,i,d){this.status=r.INITIAL;this.confirmedVisible=!1;this.initiallyVisible=!1;this.preloaderIframeLoaded=!1;this.iframeLoaded=!1;this.getWrapperEl=()=>this.el.matches(".hs-video-wrapper")?this.el:this.el.querySelector(".hs-video-wrapper");this.injectPlayer=()=>{const{options:e,placeholderEl:t}=this;if(t.querySelector(L))this.iframeEl=t.querySelector(L);else{if(this.selectIframeElFromPage()){Ee("injectPlayer found iframe el on page via selector, not inserting again.");this.replaceIframeFromPage();return}if(!t){Ee("injectPlayer cannot find placeholder, no way to render!");return}this.injectIframe(t);t.setAttribute("data-hsv-status","rendered");e.altText&&(this.iframeEl.title=e.altText)}if(v()||e.playerType===l.IN_APP_PREVIEW||e.playerType===l.EDITOR_PREVIEW||e.autoplay)this.onConfirmVisible();else{setTimeout((()=>this.confirmRendered()),n);if(window.IntersectionObserver)try{this.setupIntersectionObserver()}catch(e){this.log("Failed to setup IntersectionObserver",e);Ee("Failed to setup IntersectionObserver",{err:String(e)});this.onConfirmVisible()}else{Ee("Missing IntersectionObserver constructor");this.onConfirmVisible()}}};this.injectIframe=e=>{e.appendChild(this.el);const t=e.querySelector("img[data-hsv-id]");if(t&&t.src){this.el.style.backgroundImage=`url(${t.src})`;this.el.style.backgroundSize="contain";this.el.style.backgroundRepeat="no-repeat";this.el.style.backgroundPosition="center"}this.hidePlaceholderImage()};this.hidePlaceholderImage=()=>{const e=this.placeholderEl.querySelector("img[data-hsv-id]");e&&e.style.setProperty("display","none","important")};this.on=(e,t)=>{this.eventTarget?this.eventTarget.addEventListener(e,t):console.log("Browser does not support EventTarget API, on is a no-op.")};this.trigger=e=>{this.eventTarget&&this.eventTarget.dispatchEvent(e)};this.onConfirmVisible=()=>{const e=this.iframeEl.getAttribute("data-hsv-src");if(e){const[t]=e.split("#"),o=t.split("?");let n=o[0];const i=Me(o[1]||""),r=Me();i.parentOrigin=window.location.origin;i.renderContext=this.options.renderContext;i.locale=_e();r._hsVideoForm&&!i.ca?i.ca=xe({type:s.FORM,position:a.PRE,id:r._hsVideoForm}):r._hsVideoCta&&!i.ca&&(i.ca=xe({type:s.CTA,position:a.PRE,id:r._hsVideoCta}));g()&&(n=n.replace("play","local"));this.iframeEl.src=`${n}?${De(i)}#hsvid=${this.id}`;this.iframeEl.removeAttribute("data-hsv-src")}else{const e=this.iframeEl.getAttribute("src");if(!e||!/http(s?):/.test(e)){this.hidePlaceholderImage();this.iframeEl.src=this.buildIframeUrl();this.el.style.backgroundImage="none"}}this.status=r.LOADING;this.postMessageToPlayer(t.CONFIRM_VISIBLE);this.confirmedVisible=!0};this.log=(...e)=>{_(`(${this.id})`,...e)};this.id=e;this.portalId=o;this.options=i;this.outgoingMessages=[];this.receivedMessages=[];this.timings={constructedAt:it()};this.placeholderEl=d||k(this.id,!0);this.el=this.createPlayerIframe();this.iframeEl=this.el.querySelector("iframe");if(window.EventTarget)try{this.eventTarget=new EventTarget}catch(e){_("Cannot construct EventTarget, cannot support event handler API.",e)}}createPlayerIframe(){const{id:t,options:o,placeholderEl:n}=this;if(n&&n.querySelector(L)&&n.querySelector(".hs-video-wrapper")){_(`Found server-rendered iframe for player ${t}`,o,n);return n.querySelector(".hs-video-wrapper")}_(`Rendering iframe for player ${t}`,o,n);const i="100%"===o.height&&("100%"===o.width||o.full_width);let r="",s="",a=o.style||"",l="";if(i)s=r="position: absolute; width: 100%; height: 100%";else{const t="string"==typeof o.width?Number(o.width):o.width;let n="string"==typeof o.height?Number(o.height):o.height;const i=t&&n?n/t*100:100*e;if("number"==typeof o.maxHeight){n=o.maxHeight;l=`max-height: ${o.maxHeight}px`}let d=t?`max-width: ${t}px; `:"";const c=n&&o.maxHeight&&n>=o.maxHeight?`max-height: ${o.maxHeight}px; `:"";if("boolean"==typeof o.full_width){a||(a="margin: 0 auto;");o.full_width&&(d="")}r=`${d} ${c} ${a}`;s=`position: relative; height: 0; padding-bottom: ${i}%;`}const d=document.createElement("div");d.innerHTML=`\n    <div class="hs-video-container" style="${r.trim()}">\n      <div class="hs-video-wrapper" style="${s.trim()}">\n        <iframe id="hs_player_${t}"\n          loading="lazy"\n          referrerPolicy="origin"\n          sandbox="allow-forms allow-scripts allow-same-origin allow-popups"\n          allow="autoplay; fullscreen;"\n          style="position: absolute !important; width: 100% !important; height: 100% !important; left: 0; top: 0; border: 0 none; pointer-events: initial; ${l}">\n        </iframe>\n      </div>\n    </div>\n  `;return d.firstElementChild}getPlaceholderSelector(){return`[data-hsv-embed-id="${this.id}"]`}findPlaceholderEls(){return C(this.getPlaceholderSelector())}findOtherPlaceholderEls(){return this.findPlaceholderEls().filter((e=>e!==this.placeholderEl&&ft(e)))}selectIframeElFromPage(){const e=C(`iframe#hs_player_${this.id}`);if(e.length>1){_("Found multiple iframes for player",e);Ee("Found multiple iframes for player")}return e[0]}confirmRendered(){if(document.contains(this.el))return;if(this.selectIframeElFromPage()){Ee("confirmRendered found new iframe el on page via selector.");this.replaceIframeFromPage();return}const e=this.findOtherPlaceholderEls();e.length?Ee("confirmRendered found duplicate placeholders for player",{embedId:this.id,otherPlaceholderCount:e.length}):Ee("confirmRendered could not find player el and exhausted options to render!")}buildIframeUrl(){const e=Ne(this.options);return Ye(this.portalId,this.options.id,e,this.id,this.options,this.preloaderIframeLoaded)}isIframeLoaded(){return this.iframeLoaded}getReadyQueue(){return this.outgoingMessages}onMessageReceived(e,o){_(`Received message from player ${this.id}`,e,o);this.receivedMessages.push([e,o]);switch(e){case t.VIDEO_LOADED:this.video=o;this.handleVideoLoaded(this.video);this.trigger(new Event("videoLoaded"));break;case t.PLAYER_LOADED:this.executeReadyQueue();this.placeholderEl.setAttribute("data-hsv-status","loaded");this.timings.loadedAfterMs=it();this.trigger(new Event("loaded"));break;case t.PLAYER_READY:this.status=r.READY;this.placeholderEl.setAttribute("data-hsv-status","ready");this.timings.readyAfterMs=it();this.trigger(new Event("ready"));break;case t.PLAYER_PLAY:this.status=r.PLAYING;this.placeholderEl.setAttribute("data-hsv-status","playing");this.timings.playedAfterMs=it();this.trigger(new Event("play"));break;case t.PLAYER_PROGRESS:if(o&&"object"==typeof o&&"currentTime"in o){const e=o.currentTime,t=o.textLanguage,n=new CustomEvent("progress",{detail:{currentTime:e,textLanguage:t}});this.trigger(n)}break;case t.PLAYER_TIME_UPDATE:if(o&&"object"==typeof o&&"currentTime"in o){const e=o.currentTime,t=new CustomEvent("timeupdate",{detail:{currentTime:e}});this.trigger(t)}break;case t.SET_PLAYBACK_RATE:if(o&&"object"==typeof o&&"playbackRate"in o){const e=o.playbackRate,t=new CustomEvent("ratechange",{detail:{playbackRate:e}});this.trigger(t)}break;case t.PLAYER_SECONDS_VIEWED:o&&"object"==typeof o&&"number"==typeof o.secondsViewed&&(this.timings.secondsViewed=o.secondsViewed);break;case t.PLAYER_PAUSE:this.status=r.PAUSED;this.placeholderEl.setAttribute("data-hsv-status","paused");this.trigger(new Event("pause"));break;case t.PLAYER_ENDED:this.status=r.ENDED;this.placeholderEl.setAttribute("data-hsv-status","ended");this.trigger(new Event("ended"));break;case t.PLAYER_SHOW_OVERLAY:{const e=o||this.options.conversionAsset;if(!(e&&e.type&&e.id)){Ee("Unexpected PLAYER_SHOW_OVERLAY message");break}this.status=r.CONVERSION_ASSET_OVERLAY;this.placeholderEl.setAttribute("data-hsv-status",`${e.type.toLowerCase()}-overlay`);if(e.type===s.CTA)try{He(this,e)}catch(e){Ee("Error thrown rendering CTA")}else if(e.type===s.FORM)try{et(this,e)}catch(e){Ee("Error thrown rendering form")}break}case t.PLAYER_ORPHANED:Ee("Player did not receive SET_PAGE_META postMessage",{iframeUrl:this.iframeEl.src});break;case t.PLAYER_ERROR:Ee("In-app player reported error",{iframeUrl:this.iframeEl.src});this.trigger(new CustomEvent("error",{detail:o}))}}handleVideoLoaded(e){this.iframeEl.title||(this.iframeEl.title=e.altText||e.title)}triggerPause(){this.postMessageToPlayer(t.SET_PLAYER_STATUS,{status:r.PAUSED})}postMessageToPlayer(e,t=null,o=!0){if(this.iframeLoaded){this.iframeEl.contentWindow||this.replaceIframeFromPage();if(this.iframeEl.contentWindow){this.sendMessage(e,t);return}_(`Could not access contentWindow for player ${this.id}`,e,t)}if(o){_(`Queuing postMessage for player ${this.id}`,e,t);this.outgoingMessages.push([e,t])}}sendMessage(e,o){this.iframeEl.contentWindow||this.replaceIframeFromPage();if(this.iframeEl&&this.iframeEl.contentWindow){_(`Sending postMessage to player ${this.id}`,e,o);o&&"object"==typeof o&&e===t.SET_UTK&&"utk"in o&&(this.utk=o.utk);try{this.iframeEl.contentWindow.postMessage({type:e,payload:o},y(this.options))}catch(e){this.log("Failed to postMessage player",e)}}else _(`sendMessage could not access contentWindow for player ${this.id}`,e,o)}replaceIframe(e){this.iframeEl=e;try{this.intersectionObserver.observe(this.iframeEl)}catch(e){this.onConfirmVisible()}}replaceIframeFromPage(){const e=this.selectIframeElFromPage();if(e){_("Replacing iframeEl from page with ",this.iframeEl,this.iframeEl===e);this.iframeEl=e}}executeReadyQueue(){if(this.outgoingMessages.length){if(this.iframeLoaded){_(`Player ${this.id} reloaded, executing readyQueue of length ${this.outgoingMessages.length}`);if(this.utk){const{utk:e}=this;this.sendMessage(t.SET_UTK,{utk:e})}}else _(`Executing readyQueue of length ${this.outgoingMessages.length} for player ${this.id}`);this.outgoingMessages.forEach((([e,t])=>{this.sendMessage(e,t)}))}this.iframeLoaded=!0}setupIntersectionObserver(){if(j(this.el)){this.initiallyVisible=!0;this.onConfirmVisible()}else{this.intersectionObserver=new IntersectionObserver((e=>{e.forEach((e=>{this.log("IntersectionObserver entry",e);if(e.isIntersecting){this.log("Found player in viewport via IntersectionObserver");this.onConfirmVisible();this.intersectionObserver.disconnect()}}))}),{rootMargin:"100px",threshold:0});this.intersectionObserver.observe(this.el)}}}function yt(e,o){if(e&&e.data&&"object"==typeof e.data&&Object.keys(t).includes(e.data.type)){o&&e.origin&&e.origin!==o&&_("isPlayerMessage saw unexpected origin",e);return!0}return!1}function bt(e,t,{placeholderEl:o}={}){!o&&t.embedId&&((o=k(e,!0))?t.renderContext="embed-id-selector":_(`Failed to find for embedId: ${t.embedId} for player: ${e}`));const n=t.portalId||ve();n&&t.id||Ee("Required param `portalId` or video `id` missing");if(Ie()){t.playerType=l.EDITOR_PREVIEW;t.renderContext="editor-preview"}const i=new Et(e,n,t,o);i.injectPlayer();return i}function vt(e,t){const o=t.portalId||ve(),n=Ne(t),i=Ye(o,t.id,n,e.id,t);if(t.conversionAsset&&e.options.conversionAsset&&t.conversionAsset.id!==e.options.conversionAsset.id){const t=e.el.querySelector(".hsv-overlay");t&&t.remove()}_(`Updating src of existing iframe for player ${e.id}`,t);e.options=t;e.iframeEl.src=i;t.altText&&(e.iframeEl.title=t.altText);return e}function wt(e,t,o,n=!0){$e(e).forEach((e=>{e.postMessageToPlayer(t,o,n)}))}function Pt(e){window.addEventListener("message",(o=>{if(yt(o,y())){const{data:n}=o,{type:i,embedId:s,payload:a={}}=n,l=e[s];if(!l){console.warn(`Could not find embedId ${s}`,n);return}l.onMessageReceived(i,a);if(!(i!==t.PLAYER_PLAY||l.options.autoplay&&a.isInitial)){const t=$e(e).filter((e=>e!==l&&e.status===r.PLAYING));t.length&&_(`Pausing ${t.length} other currently playing players`,t);t.forEach((e=>e.triggerPause()))}if(i===t.PLAYER_ANALYTICS_EVENTS){const e=JSON.parse(a);e.events&&e.events.length&&window._hsq&&e.events.forEach((e=>window._hsq.push(e)))}}}))}function At(){const e=({id:e})=>{const t=document.querySelector(`.hs-form-${e}.submitted-message`);if(t){const e=mt(t);_(`Found ${e.length} players in form thank you message`);e.forEach((({el:e,options:t})=>{t.renderContext="form-inline-message";window.hsVideoApi.renderPlayer(e,t)}))}};window.addEventListener("message",(t=>{if(t.data&&"hsFormCallback"===t.data.type&&"onFormSubmitted"===t.data.eventName){_("Form submitted",t.data);setTimeout((()=>e(t.data)))}}))}function _t(){if(!window.MutationObserver)return null;const e=new MutationObserver((e=>{e.forEach((e=>{if(!e.addedNodes.length)return;const t=[...e.addedNodes].filter((e=>e instanceof Element&&(e.matches(L)||e.matches(O))));e.addedNodes.forEach((e=>{e instanceof Element&&t.push(...e.querySelectorAll(L),...e.querySelectorAll(O))}));if(t.length){_("Found server-rendered iframes via MutationObserver:",t);Ee("Found server-rendered iframes via MutationObserver (leaving here for debugging)");t.forEach((e=>{const t=F(e,".hs-video-widget[data-hsv-embed-id]");if(!t||!t.dataset.hsvEmbedId)return;const o=window.hsVideoApi.getPlayer(t.dataset.hsvEmbedId);if(o&&e.matches(O)){_(`Moving player ${t.dataset.hsvEmbedId} to new iframe: `,e);o.replaceIframe(e)}else{const e=pt(t);if(null!=e&&e.embedId){e.renderContext="hubl-iframe";window.hsVideoApi.renderPlayer(t,e)}}}))}}))}));try{e.observe(document.body,{childList:!0,subtree:!0})}catch(e){Ee("Failed to create MutationObserver")}return e}function It(){document.addEventListener("securitypolicyviolation",(e=>{_("SecurityPolicyViolationEvent event",e);const{blockedURI:t,disposition:o}=e;e.blockedURI&&T.test(t)&&Ee(`CSP ${o} blocked video-embed JS`,{blockedURI:t});e.blockedURI&&e.blockedURI.includes(y())&&Ee(`CSP ${o} blocked player iframe load`,{blockedURI:t})}))}let Rt=1;function Tt(e="uniq"){return`${e}${Rt++}`}let St=!1;function Lt({testingMode:e=!1}={}){const o=window._hsq=window._hsq||[],n=window._hsp=window._hsp||[],i=[],r={};let s,a;const l=e=>Boolean(r[e]),d=e=>Boolean(r[e]&&r[e].confirmedVisible),c=e=>i.find((([t])=>e===t));function u(...e){let t,o,n;Ee("registerPlayer still being called");if("string"==typeof e[0]){t=e[0];o=e[1];o.embedId=t||Tt()}else if(e[0]instanceof HTMLElement){n=e[0];o=e[1];t=o.embedId||Tt()}else{if("object"!=typeof e[0]){console.warn("invalid args passed to `registerPlayer`",e);return}o=e[0];t=o.embedId||Tt()}if(c(t)||l(t))_(`Player with embedId: ${t} already exists, ignoring call to registerPlayer`,o);else{if(x()){!n&&o.embedId&&(n=k(t));if(n){m(n,o);return}}i.push([t,o])}}function h(){return!!s&&(s.categories?s.categories.analytics:s.allowed)}function p(e){wt({[e]:r[e]},t.SET_PAGE_META,Oe());a&&h()&&!v()&&wt({[e]:r[e]},t.SET_UTK,{utk:a})}function f(e,t,o){r[e]=bt(e,t,o);v()||p(e);return r[e]}function m(e,t){let o,n;if("string"==typeof e){o=e;n=k(o);if(!n){console.warn(`Element id ${e} not found`);return null}}else{if(!(e instanceof HTMLElement)){console.warn("First argument to renderPlayer must be an id string or HTMLElement");return null}o=t.embedId||Tt();n=e}if(l(o)&&d(o)){_(`Player with embedId: ${o} already exists, ignoring call to renderPlayer`,t);return null}return f(o,t,{placeholderEl:n})}function g(e,t){const o=P(e);if(!o){_(`Could not find player id ${e} to update`);return null}vt(o,t);return o}function y(e){a=e;if(s&&a)if(h()){_(`Received utk ${a} privacyConsent`,JSON.stringify(s));wt(r,t.SET_UTK,{utk:a})}else{_("Received privacyConsent but not allowed",a,s);wt(r,t.SET_UTK,null)}else _("Could not obtain utk cookie and privacyConsent",a,s)}function b(){n.push(["addPrivacyConsentListener",e=>{s=e;o.push(["addUserTokenListener",y])}])}function w(){return r}function P(e){return w()[e]}function I(){return $e(r).reduce(((e,t)=>{t.receivedMessages.forEach((o=>{e.push([t.id,o[0],o[1]])}));return e}),[])}function R(){$e(r).forEach((e=>e.triggerPause()))}function T(){mt().forEach((({el:e,options:t})=>{if(t.embedId){t.renderContext=U(e,".widget-type-rich_text")?"rich-text-placeholder":"onload-placeholder";Re()&&(t.renderContext="share-page");f(t.embedId,t,{placeholderEl:e})}}));gt().forEach((({el:e,options:t})=>{if(t.embedId){t.renderContext=Re()?"hubl-iframe-share-page":"hubl-iframe";f(t.embedId,t,{placeholderEl:e})}}))}function S(){setTimeout((()=>{const e=Object.values(w()).find((e=>e.confirmedVisible));e?_("Not inserting preloader iframe as at least one player is already visible & loading:",e):H((()=>{Object.values(w()).forEach((e=>{e.preloaderIframeLoaded=!0}))}))}),500)}function L(){i.forEach((([e,t])=>{f(e,t)}));Pt(r);St=!0;if(!v()){S();b();T();It();At();_t();window._hsVideoReady&&Array.isArray(window._hsVideoReady)&&setTimeout((()=>window._hsVideoReady.forEach((e=>e()))))}}if(St&&!e)_("loader already initialized, not listening for document load");else if(x())try{L()}catch(e){ye(e,{source:"already-loaded"})}else{document.addEventListener("DOMContentLoaded",(()=>{try{L()}catch(e){ye(e,{source:"DOMContentLoaded"})}}));window.addEventListener("content-analytics-code-not-loaded",(()=>y(null)))}const O={registerPlayer:u,renderPlayer:m,updatePlayer:g,getPlayer:P,getPlayers:()=>$e(w()),getPerformanceMetrics:()=>st(Object.values(r)),pauseAllPlayers:R};return e||A()||E()?Object.assign({},O,{getPlayerMessages:I,triggerLoad:L,renderPlaceholders:T}):O}let Ot=window.hsVideoApi;Ot?_("hsVideoApi found on page, not calling createLoader"):window.hsVideoApi=Ot=Lt();Ot.renderPlayer,Ot.updatePlayer}();
//# sourceMappingURL=//static.hsappstatic.net/video-embed/static-1.25751/bundles/loader.js.map